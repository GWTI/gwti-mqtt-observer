{
  "/Users/yolandacollins/Documents/work/aws/gwti-mqtt-observer/serverless.yml": {
    "versionFramework": "4.7.0",
    "servicePath": "/Users/yolandacollins/Documents/work/aws/gwti-mqtt-observer/serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "org": "landabear16",
      "app": "mqtt",
      "service": "gwti-mqtt-observer",
      "frameworkVersion": "4",
      "provider": {
        "name": "aws",
        "runtime": "python3.9",
        "region": "eu-west-2",
        "stage": "development",
        "deploymentBucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
        "environment": {
          "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
          "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
          "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
          "EY_FORK_MQTT_TOPIC": "ey/observer/development"
        },
        "versionFunctions": true,
        "deploymentBucketObject": {
          "name": "mqtt-obs-sls-eu-west-2-development-470851704113"
        },
        "compiledCloudFormationTemplate": {
          "AWSTemplateFormatVersion": "2010-09-09",
          "Description": "The AWS CloudFormation template for this Serverless application",
          "Resources": {
            "CsvToJsonLogGroup": {
              "Type": "AWS::Logs::LogGroup",
              "Properties": {
                "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-csvToJson"
              }
            },
            "ObserverMHandlerLogGroup": {
              "Type": "AWS::Logs::LogGroup",
              "Properties": {
                "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-observerMHandler"
              }
            },
            "ForkEyDataToEyStreamLogGroup": {
              "Type": "AWS::Logs::LogGroup",
              "Properties": {
                "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-forkEyDataToEyStream"
              }
            },
            "SendObserverDataLogGroup": {
              "Type": "AWS::Logs::LogGroup",
              "Properties": {
                "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-sendObserverData"
              }
            },
            "CsvToJsonLambdaFunction": {
              "Type": "AWS::Lambda::Function",
              "Properties": {
                "Code": {
                  "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                  "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/csvToJson.zip"
                },
                "Handler": "src/csvToJson.lambda_handler",
                "Runtime": "python3.9",
                "FunctionName": "gwti-mqtt-observer-development-csvToJson",
                "MemorySize": 1024,
                "Timeout": 300,
                "Environment": {
                  "Variables": {
                    "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                    "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                    "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                    "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                  }
                },
                "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
              },
              "DependsOn": [
                "CsvToJsonLogGroup"
              ]
            },
            "ObserverMHandlerLambdaFunction": {
              "Type": "AWS::Lambda::Function",
              "Properties": {
                "Code": {
                  "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                  "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/observerMHandler.zip"
                },
                "Handler": "src/observer_m_no_process.lambda_handler",
                "Runtime": "python3.9",
                "FunctionName": "gwti-mqtt-observer-development-observerMHandler",
                "MemorySize": 1024,
                "Timeout": 300,
                "Environment": {
                  "Variables": {
                    "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                    "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                    "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                    "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                  }
                },
                "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
              },
              "DependsOn": [
                "ObserverMHandlerLogGroup"
              ]
            },
            "ForkEyDataToEyStreamLambdaFunction": {
              "Type": "AWS::Lambda::Function",
              "Properties": {
                "Code": {
                  "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                  "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/forkEyDataToEyStream.zip"
                },
                "Handler": "src/forkEyDataToEyStream.lambda_handler",
                "Runtime": "python3.9",
                "FunctionName": "gwti-mqtt-observer-development-forkEyDataToEyStream",
                "MemorySize": 1024,
                "Timeout": 300,
                "Environment": {
                  "Variables": {
                    "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                    "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                    "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                    "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                  }
                },
                "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ForkEyObserverDataRole"
              },
              "DependsOn": [
                "ForkEyDataToEyStreamLogGroup"
              ]
            },
            "SendObserverDataLambdaFunction": {
              "Type": "AWS::Lambda::Function",
              "Properties": {
                "Code": {
                  "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                  "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/sendObserverData.zip"
                },
                "Handler": "src/sendObserverData.lambda_handler",
                "Runtime": "python3.9",
                "FunctionName": "gwti-mqtt-observer-development-sendObserverData",
                "MemorySize": 1024,
                "Timeout": 60,
                "Environment": {
                  "Variables": {
                    "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                    "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                    "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                    "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                  }
                },
                "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-SendObserverDataRole"
              },
              "DependsOn": [
                "SendObserverDataLogGroup"
              ]
            },
            "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8": {
              "Type": "AWS::Lambda::Version",
              "DeletionPolicy": "Retain",
              "Properties": {
                "FunctionName": {
                  "Ref": "ForkEyDataToEyStreamLambdaFunction"
                },
                "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
              }
            },
            "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE": {
              "Type": "AWS::Lambda::Version",
              "DeletionPolicy": "Retain",
              "Properties": {
                "FunctionName": {
                  "Ref": "CsvToJsonLambdaFunction"
                },
                "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
              }
            },
            "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI": {
              "Type": "AWS::Lambda::Version",
              "DeletionPolicy": "Retain",
              "Properties": {
                "FunctionName": {
                  "Ref": "SendObserverDataLambdaFunction"
                },
                "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
              }
            },
            "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M": {
              "Type": "AWS::Lambda::Version",
              "DeletionPolicy": "Retain",
              "Properties": {
                "FunctionName": {
                  "Ref": "ObserverMHandlerLambdaFunction"
                },
                "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
              }
            },
            "CsvToJsonIotTopicRule1": {
              "Type": "AWS::IoT::TopicRule",
              "Properties": {
                "TopicRulePayload": {
                  "RuleDisabled": false,
                  "Sql": "SELECT * FROM 'observer/development/#'",
                  "Actions": [
                    {
                      "Lambda": {
                        "FunctionArn": {
                          "Fn::GetAtt": [
                            "CsvToJsonLambdaFunction",
                            "Arn"
                          ]
                        }
                      }
                    }
                  ]
                }
              }
            },
            "CsvToJsonLambdaPermissionIotTopicRule1": {
              "Type": "AWS::Lambda::Permission",
              "Properties": {
                "FunctionName": {
                  "Fn::GetAtt": [
                    "CsvToJsonLambdaFunction",
                    "Arn"
                  ]
                },
                "Action": "lambda:InvokeFunction",
                "Principal": "iot.amazonaws.com",
                "SourceArn": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iot:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":rule/",
                      {
                        "Ref": "CsvToJsonIotTopicRule1"
                      }
                    ]
                  ]
                }
              }
            },
            "CsvToJsonIotTopicRule2": {
              "Type": "AWS::IoT::TopicRule",
              "Properties": {
                "TopicRulePayload": {
                  "RuleDisabled": false,
                  "Sql": "SELECT * FROM 'ey/observer/development/#'",
                  "Actions": [
                    {
                      "Lambda": {
                        "FunctionArn": {
                          "Fn::GetAtt": [
                            "CsvToJsonLambdaFunction",
                            "Arn"
                          ]
                        }
                      }
                    }
                  ]
                }
              }
            },
            "CsvToJsonLambdaPermissionIotTopicRule2": {
              "Type": "AWS::Lambda::Permission",
              "Properties": {
                "FunctionName": {
                  "Fn::GetAtt": [
                    "CsvToJsonLambdaFunction",
                    "Arn"
                  ]
                },
                "Action": "lambda:InvokeFunction",
                "Principal": "iot.amazonaws.com",
                "SourceArn": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iot:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":rule/",
                      {
                        "Ref": "CsvToJsonIotTopicRule2"
                      }
                    ]
                  ]
                }
              }
            },
            "ObserverMHandlerIotTopicRule1": {
              "Type": "AWS::IoT::TopicRule",
              "Properties": {
                "TopicRulePayload": {
                  "RuleDisabled": false,
                  "Sql": "SELECT * FROM 'observer-m/development/#'",
                  "Actions": [
                    {
                      "Lambda": {
                        "FunctionArn": {
                          "Fn::GetAtt": [
                            "ObserverMHandlerLambdaFunction",
                            "Arn"
                          ]
                        }
                      }
                    }
                  ]
                }
              }
            },
            "ObserverMHandlerLambdaPermissionIotTopicRule1": {
              "Type": "AWS::Lambda::Permission",
              "Properties": {
                "FunctionName": {
                  "Fn::GetAtt": [
                    "ObserverMHandlerLambdaFunction",
                    "Arn"
                  ]
                },
                "Action": "lambda:InvokeFunction",
                "Principal": "iot.amazonaws.com",
                "SourceArn": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iot:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":rule/",
                      {
                        "Ref": "ObserverMHandlerIotTopicRule1"
                      }
                    ]
                  ]
                }
              }
            },
            "ForkEyDataToEyStreamIotTopicRule1": {
              "Type": "AWS::IoT::TopicRule",
              "Properties": {
                "TopicRulePayload": {
                  "RuleDisabled": false,
                  "Sql": "SELECT * FROM 'ey/observer/development/#'",
                  "Actions": [
                    {
                      "Lambda": {
                        "FunctionArn": {
                          "Fn::GetAtt": [
                            "ForkEyDataToEyStreamLambdaFunction",
                            "Arn"
                          ]
                        }
                      }
                    }
                  ]
                }
              }
            },
            "ForkEyDataToEyStreamLambdaPermissionIotTopicRule1": {
              "Type": "AWS::Lambda::Permission",
              "Properties": {
                "FunctionName": {
                  "Fn::GetAtt": [
                    "ForkEyDataToEyStreamLambdaFunction",
                    "Arn"
                  ]
                },
                "Action": "lambda:InvokeFunction",
                "Principal": "iot.amazonaws.com",
                "SourceArn": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iot:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":rule/",
                      {
                        "Ref": "ForkEyDataToEyStreamIotTopicRule1"
                      }
                    ]
                  ]
                }
              }
            },
            "SendObserverDataEventSourceMappingSQSGwtimqttobserverdevelopmentsendToTargetServerfifo": {
              "Type": "AWS::Lambda::EventSourceMapping",
              "DependsOn": [],
              "Properties": {
                "BatchSize": 10,
                "EventSourceArn": "arn:aws:sqs:eu-west-2:470851704113:gwti-mqtt-observer-development-sendToTargetServer.fifo",
                "FunctionName": {
                  "Fn::GetAtt": [
                    "SendObserverDataLambdaFunction",
                    "Arn"
                  ]
                },
                "Enabled": true
              }
            }
          },
          "Outputs": {
            "ServerlessDeploymentBucketName": {
              "Value": "mqtt-obs-sls-eu-west-2-development-470851704113",
              "Export": {
                "Name": "sls-gwti-mqtt-observer-development-ServerlessDeploymentBucketName"
              }
            },
            "ForkEyDataToEyStreamLambdaFunctionQualifiedArn": {
              "Description": "Current Lambda function version",
              "Value": {
                "Ref": "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8"
              },
              "Export": {
                "Name": "sls-gwti-mqtt-observer-development-ForkEyDataToEyStreamLambdaFunctionQualifiedArn"
              }
            },
            "CsvToJsonLambdaFunctionQualifiedArn": {
              "Description": "Current Lambda function version",
              "Value": {
                "Ref": "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE"
              },
              "Export": {
                "Name": "sls-gwti-mqtt-observer-development-CsvToJsonLambdaFunctionQualifiedArn"
              }
            },
            "SendObserverDataLambdaFunctionQualifiedArn": {
              "Description": "Current Lambda function version",
              "Value": {
                "Ref": "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI"
              },
              "Export": {
                "Name": "sls-gwti-mqtt-observer-development-SendObserverDataLambdaFunctionQualifiedArn"
              }
            },
            "ObserverMHandlerLambdaFunctionQualifiedArn": {
              "Description": "Current Lambda function version",
              "Value": {
                "Ref": "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M"
              },
              "Export": {
                "Name": "sls-gwti-mqtt-observer-development-ObserverMHandlerLambdaFunctionQualifiedArn"
              }
            }
          }
        },
        "vpc": {}
      },
      "functions": {
        "csvToJson": {
          "handler": "src/csvToJson.lambda_handler",
          "timeout": 300,
          "events": [
            {
              "iot": {
                "sql": "SELECT * FROM 'observer/development/#'"
              }
            },
            {
              "iot": {
                "sql": "SELECT * FROM 'ey/observer/development/#'"
              }
            }
          ],
          "role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole",
          "name": "gwti-mqtt-observer-development-csvToJson",
          "module": ".",
          "package": {
            "artifact": ".serverless/csvToJson.zip"
          },
          "memory": 1024,
          "runtime": "python3.9",
          "vpc": {},
          "versionLogicalId": "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE"
        },
        "observerMHandler": {
          "handler": "src/observer_m_no_process.lambda_handler",
          "timeout": 300,
          "events": [
            {
              "iot": {
                "sql": "SELECT * FROM 'observer-m/development/#'"
              }
            }
          ],
          "role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole",
          "name": "gwti-mqtt-observer-development-observerMHandler",
          "module": ".",
          "package": {
            "artifact": ".serverless/observerMHandler.zip"
          },
          "memory": 1024,
          "runtime": "python3.9",
          "vpc": {},
          "versionLogicalId": "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M"
        },
        "forkEyDataToEyStream": {
          "handler": "src/forkEyDataToEyStream.lambda_handler",
          "timeout": 300,
          "events": [
            {
              "iot": {
                "sql": "SELECT * FROM 'ey/observer/development/#'"
              }
            }
          ],
          "role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ForkEyObserverDataRole",
          "name": "gwti-mqtt-observer-development-forkEyDataToEyStream",
          "module": ".",
          "package": {
            "artifact": ".serverless/forkEyDataToEyStream.zip"
          },
          "memory": 1024,
          "runtime": "python3.9",
          "vpc": {},
          "versionLogicalId": "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8"
        },
        "sendObserverData": {
          "handler": "src/sendObserverData.lambda_handler",
          "timeout": 60,
          "events": [
            {
              "sqs": "arn:aws:sqs:eu-west-2:470851704113:gwti-mqtt-observer-development-sendToTargetServer.fifo"
            }
          ],
          "role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-SendObserverDataRole",
          "name": "gwti-mqtt-observer-development-sendObserverData",
          "module": ".",
          "package": {
            "artifact": ".serverless/sendObserverData.zip"
          },
          "memory": 1024,
          "runtime": "python3.9",
          "vpc": {},
          "versionLogicalId": "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI"
        }
      },
      "plugins": [
        "serverless-python-requirements"
      ],
      "custom": {
        "pythonRequirements": {
          "dockerizePip": "non-linux",
          "slim": true,
          "strip": true,
          "zip": false,
          "slimPatterns": [
            "**/*.pyc",
            "**/*.pyo",
            "**/tests/**",
            "**/test/**",
            "**/__pycache__/**"
          ]
        }
      },
      "package": {
        "individually": true,
        "exclude": [
          "terraform/**",
          "setup-scripts/**",
          "bin/**",
          "*.log",
          "README.md",
          "package-lock.json",
          "package.json",
          "webpack.config.js",
          "node_modules/**"
        ],
        "artifactsS3KeyDirname": "serverless/gwti-mqtt-observer/development/code-artifacts",
        "deploymentBucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
        "artifactDirectoryName": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z"
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "python3.9",
      "region": "eu-west-2",
      "stage": "development",
      "deploymentBucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
      "environment": {
        "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
        "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
        "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
        "EY_FORK_MQTT_TOPIC": "ey/observer/development"
      },
      "versionFunctions": true,
      "deploymentBucketObject": {
        "name": "mqtt-obs-sls-eu-west-2-development-470851704113"
      },
      "compiledCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "CsvToJsonLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-csvToJson"
            }
          },
          "ObserverMHandlerLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-observerMHandler"
            }
          },
          "ForkEyDataToEyStreamLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-forkEyDataToEyStream"
            }
          },
          "SendObserverDataLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-sendObserverData"
            }
          },
          "CsvToJsonLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/csvToJson.zip"
              },
              "Handler": "src/csvToJson.lambda_handler",
              "Runtime": "python3.9",
              "FunctionName": "gwti-mqtt-observer-development-csvToJson",
              "MemorySize": 1024,
              "Timeout": 300,
              "Environment": {
                "Variables": {
                  "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                  "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                  "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                  "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                }
              },
              "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
            },
            "DependsOn": [
              "CsvToJsonLogGroup"
            ]
          },
          "ObserverMHandlerLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/observerMHandler.zip"
              },
              "Handler": "src/observer_m_no_process.lambda_handler",
              "Runtime": "python3.9",
              "FunctionName": "gwti-mqtt-observer-development-observerMHandler",
              "MemorySize": 1024,
              "Timeout": 300,
              "Environment": {
                "Variables": {
                  "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                  "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                  "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                  "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                }
              },
              "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
            },
            "DependsOn": [
              "ObserverMHandlerLogGroup"
            ]
          },
          "ForkEyDataToEyStreamLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/forkEyDataToEyStream.zip"
              },
              "Handler": "src/forkEyDataToEyStream.lambda_handler",
              "Runtime": "python3.9",
              "FunctionName": "gwti-mqtt-observer-development-forkEyDataToEyStream",
              "MemorySize": 1024,
              "Timeout": 300,
              "Environment": {
                "Variables": {
                  "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                  "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                  "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                  "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                }
              },
              "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ForkEyObserverDataRole"
            },
            "DependsOn": [
              "ForkEyDataToEyStreamLogGroup"
            ]
          },
          "SendObserverDataLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
                "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/sendObserverData.zip"
              },
              "Handler": "src/sendObserverData.lambda_handler",
              "Runtime": "python3.9",
              "FunctionName": "gwti-mqtt-observer-development-sendObserverData",
              "MemorySize": 1024,
              "Timeout": 60,
              "Environment": {
                "Variables": {
                  "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                  "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                  "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                  "EY_FORK_MQTT_TOPIC": "ey/observer/development"
                }
              },
              "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-SendObserverDataRole"
            },
            "DependsOn": [
              "SendObserverDataLogGroup"
            ]
          },
          "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ForkEyDataToEyStreamLambdaFunction"
              },
              "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
            }
          },
          "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CsvToJsonLambdaFunction"
              },
              "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
            }
          },
          "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "SendObserverDataLambdaFunction"
              },
              "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
            }
          },
          "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ObserverMHandlerLambdaFunction"
              },
              "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
            }
          },
          "CsvToJsonIotTopicRule1": {
            "Type": "AWS::IoT::TopicRule",
            "Properties": {
              "TopicRulePayload": {
                "RuleDisabled": false,
                "Sql": "SELECT * FROM 'observer/development/#'",
                "Actions": [
                  {
                    "Lambda": {
                      "FunctionArn": {
                        "Fn::GetAtt": [
                          "CsvToJsonLambdaFunction",
                          "Arn"
                        ]
                      }
                    }
                  }
                ]
              }
            }
          },
          "CsvToJsonLambdaPermissionIotTopicRule1": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CsvToJsonLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "iot.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iot:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":rule/",
                    {
                      "Ref": "CsvToJsonIotTopicRule1"
                    }
                  ]
                ]
              }
            }
          },
          "CsvToJsonIotTopicRule2": {
            "Type": "AWS::IoT::TopicRule",
            "Properties": {
              "TopicRulePayload": {
                "RuleDisabled": false,
                "Sql": "SELECT * FROM 'ey/observer/development/#'",
                "Actions": [
                  {
                    "Lambda": {
                      "FunctionArn": {
                        "Fn::GetAtt": [
                          "CsvToJsonLambdaFunction",
                          "Arn"
                        ]
                      }
                    }
                  }
                ]
              }
            }
          },
          "CsvToJsonLambdaPermissionIotTopicRule2": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CsvToJsonLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "iot.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iot:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":rule/",
                    {
                      "Ref": "CsvToJsonIotTopicRule2"
                    }
                  ]
                ]
              }
            }
          },
          "ObserverMHandlerIotTopicRule1": {
            "Type": "AWS::IoT::TopicRule",
            "Properties": {
              "TopicRulePayload": {
                "RuleDisabled": false,
                "Sql": "SELECT * FROM 'observer-m/development/#'",
                "Actions": [
                  {
                    "Lambda": {
                      "FunctionArn": {
                        "Fn::GetAtt": [
                          "ObserverMHandlerLambdaFunction",
                          "Arn"
                        ]
                      }
                    }
                  }
                ]
              }
            }
          },
          "ObserverMHandlerLambdaPermissionIotTopicRule1": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ObserverMHandlerLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "iot.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iot:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":rule/",
                    {
                      "Ref": "ObserverMHandlerIotTopicRule1"
                    }
                  ]
                ]
              }
            }
          },
          "ForkEyDataToEyStreamIotTopicRule1": {
            "Type": "AWS::IoT::TopicRule",
            "Properties": {
              "TopicRulePayload": {
                "RuleDisabled": false,
                "Sql": "SELECT * FROM 'ey/observer/development/#'",
                "Actions": [
                  {
                    "Lambda": {
                      "FunctionArn": {
                        "Fn::GetAtt": [
                          "ForkEyDataToEyStreamLambdaFunction",
                          "Arn"
                        ]
                      }
                    }
                  }
                ]
              }
            }
          },
          "ForkEyDataToEyStreamLambdaPermissionIotTopicRule1": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ForkEyDataToEyStreamLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "iot.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iot:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":rule/",
                    {
                      "Ref": "ForkEyDataToEyStreamIotTopicRule1"
                    }
                  ]
                ]
              }
            }
          },
          "SendObserverDataEventSourceMappingSQSGwtimqttobserverdevelopmentsendToTargetServerfifo": {
            "Type": "AWS::Lambda::EventSourceMapping",
            "DependsOn": [],
            "Properties": {
              "BatchSize": 10,
              "EventSourceArn": "arn:aws:sqs:eu-west-2:470851704113:gwti-mqtt-observer-development-sendToTargetServer.fifo",
              "FunctionName": {
                "Fn::GetAtt": [
                  "SendObserverDataLambdaFunction",
                  "Arn"
                ]
              },
              "Enabled": true
            }
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": "mqtt-obs-sls-eu-west-2-development-470851704113",
            "Export": {
              "Name": "sls-gwti-mqtt-observer-development-ServerlessDeploymentBucketName"
            }
          },
          "ForkEyDataToEyStreamLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8"
            },
            "Export": {
              "Name": "sls-gwti-mqtt-observer-development-ForkEyDataToEyStreamLambdaFunctionQualifiedArn"
            }
          },
          "CsvToJsonLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE"
            },
            "Export": {
              "Name": "sls-gwti-mqtt-observer-development-CsvToJsonLambdaFunctionQualifiedArn"
            }
          },
          "SendObserverDataLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI"
            },
            "Export": {
              "Name": "sls-gwti-mqtt-observer-development-SendObserverDataLambdaFunctionQualifiedArn"
            }
          },
          "ObserverMHandlerLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M"
            },
            "Export": {
              "Name": "sls-gwti-mqtt-observer-development-ObserverMHandlerLambdaFunctionQualifiedArn"
            }
          }
        }
      },
      "vpc": {}
    },
    "dashboard": {
      "isEnabledForService": true,
      "requiredAuthentication": false,
      "orgFeaturesInUse": {
        "providers": false,
        "monitoring": true
      },
      "orgObservabilityIntegrations": [
        {
          "integrationId": "q4oeQEz53uuFDH4YHinZuh",
          "awsAccountId": "470851704113",
          "status": "alive"
        }
      ],
      "serviceAppId": "jt934g35wrkC4kQyJN",
      "serviceProvider": null,
      "instanceParameters": null
    },
    "serviceRawFile": "org: landabear16\r\napp: mqtt\r\nservice: gwti-mqtt-observer\r\nframeworkVersion: '4'\r\n\r\nprovider:\r\n  name: aws\r\n  runtime: python3.9\r\n  region: ${env:AWS_DEFAULT_REGION, 'eu-west-2'}\r\n  stage: ${opt:stage, 'dev'}\r\n  deploymentBucket:\r\n    name: mqtt-obs-sls-${self:provider.region}-${self:provider.stage}-${env:AWS_ACCOUNT_ID}\r\n  environment:\r\n    OBSERVER_DATA_TABLE_NAME: ${file(./terraform/terraform-state-${self:provider.stage}.json):observer_zip_table_name}\r\n    SEND_TO_TARGET_SERVER_QUEUE: ${file(./terraform/terraform-state-${self:provider.stage}.json):send_on_to_target_server_queue_url}\r\n    DEVKEY_CACHE_TABLE_NAME: ${file(./terraform/terraform-state-${self:provider.stage}.json):devkey_cache_name}\r\n    EY_FORK_MQTT_TOPIC: ey/observer/${self:provider.stage}\r\n\r\nfunctions:\r\n  csvToJson:\r\n    handler: src/csvToJson.lambda_handler\r\n    timeout: 300\r\n    events:\r\n      - iot:\r\n          sql: \"SELECT * FROM 'observer/${self:provider.stage}/#'\"\r\n      - iot:\r\n          sql: \"SELECT * FROM 'ey/observer/${self:provider.stage}/#'\"\r\n    role: ${file(./terraform/terraform-state-${self:provider.stage}.json):observer_role_arn}\r\n  \r\n  observerMHandler:\r\n    handler: src/observer_m_no_process.lambda_handler\r\n    timeout: 300\r\n    events:\r\n      - iot:\r\n          sql: \"SELECT * FROM 'observer-m/${self:provider.stage}/#'\"\r\n    role: ${file(./terraform/terraform-state-${self:provider.stage}.json):observer_role_arn}\r\n    \r\n  forkEyDataToEyStream:\r\n    handler: src/forkEyDataToEyStream.lambda_handler\r\n    timeout: 300\r\n    events:\r\n      - iot:\r\n          sql: \"SELECT * FROM 'ey/observer/${self:provider.stage}/#'\"\r\n    role: ${file(./terraform/terraform-state-${self:provider.stage}.json):ey_fork_observer_data_role_arn}\r\n\r\n  sendObserverData:\r\n    handler: src/sendObserverData.lambda_handler\r\n    timeout: 60\r\n    events:\r\n      - sqs: ${file(./terraform/terraform-state-${self:provider.stage}.json):send_on_to_target_server_arn}\r\n    role: ${file(./terraform/terraform-state-${self:provider.stage}.json):observer_data_role_arn}\r\n\r\nplugins:\r\n  - serverless-python-requirements\r\n\r\ncustom:\r\n  pythonRequirements:\r\n    dockerizePip: non-linux\r\n    slim: true\r\n    strip: true\r\n    zip: false\r\n    slimPatterns:\r\n      - '**/*.pyc'\r\n      - '**/*.pyo'\r\n      - '**/tests/**'\r\n      - '**/test/**'\r\n      - '**/__pycache__/**'\r\n\r\npackage:\r\n  individually: true\r\n  exclude:\r\n    - terraform/**\r\n    - setup-scripts/**\r\n    - bin/**\r\n    - '*.log'\r\n    - README.md\r\n    - package-lock.json\r\n    - package.json\r\n    - webpack.config.js\r\n    - node_modules/**",
    "command": [
      "deploy"
    ],
    "options": {
      "verbose": true,
      "stage": "development",
      "region": "eu-west-2",
      "force": true
    },
    "orgId": "c6bb609f-0e75-4aac-b1c5-c61039ab3f36",
    "orgName": "landabear16",
    "userId": "8FlR68K8RJWR95h7gF",
    "userName": "landabear16",
    "serviceProviderAwsAccountId": "470851704113",
    "serviceProviderAwsCfStackName": "gwti-mqtt-observer-development",
    "serviceProviderAwsCfStackId": "arn:aws:cloudformation:eu-west-2:470851704113:stack/gwti-mqtt-observer-development/a8be5e70-f37b-11ef-86f1-06882be16da1",
    "serviceProviderAwsCfStackCreated": "2025-02-25T13:23:11.326Z",
    "serviceProviderAwsCfStackUpdated": "2025-03-04T20:20:02.724Z",
    "serviceProviderAwsCfStackStatus": "UPDATE_COMPLETE",
    "serviceProviderAwsCfStackOutputs": [
      {
        "OutputKey": "SendObserverDataLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:eu-west-2:470851704113:function:gwti-mqtt-observer-development-sendObserverData:21",
        "Description": "Current Lambda function version",
        "ExportName": "sls-gwti-mqtt-observer-development-SendObserverDataLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ObserverMHandlerLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:eu-west-2:470851704113:function:gwti-mqtt-observer-development-observerMHandler:13",
        "Description": "Current Lambda function version",
        "ExportName": "sls-gwti-mqtt-observer-development-ObserverMHandlerLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "CsvToJsonLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:eu-west-2:470851704113:function:gwti-mqtt-observer-development-csvToJson:21",
        "Description": "Current Lambda function version",
        "ExportName": "sls-gwti-mqtt-observer-development-CsvToJsonLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ForkEyDataToEyStreamLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:eu-west-2:470851704113:function:gwti-mqtt-observer-development-forkEyDataToEyStream:20",
        "Description": "Current Lambda function version",
        "ExportName": "sls-gwti-mqtt-observer-development-ForkEyDataToEyStreamLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ServerlessDeploymentBucketName",
        "OutputValue": "mqtt-obs-sls-eu-west-2-development-470851704113",
        "ExportName": "sls-gwti-mqtt-observer-development-ServerlessDeploymentBucketName"
      }
    ],
    "compiledCloudFormationTemplate": {
      "AWSTemplateFormatVersion": "2010-09-09",
      "Description": "The AWS CloudFormation template for this Serverless application",
      "Resources": {
        "CsvToJsonLogGroup": {
          "Type": "AWS::Logs::LogGroup",
          "Properties": {
            "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-csvToJson"
          }
        },
        "ObserverMHandlerLogGroup": {
          "Type": "AWS::Logs::LogGroup",
          "Properties": {
            "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-observerMHandler"
          }
        },
        "ForkEyDataToEyStreamLogGroup": {
          "Type": "AWS::Logs::LogGroup",
          "Properties": {
            "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-forkEyDataToEyStream"
          }
        },
        "SendObserverDataLogGroup": {
          "Type": "AWS::Logs::LogGroup",
          "Properties": {
            "LogGroupName": "/aws/lambda/gwti-mqtt-observer-development-sendObserverData"
          }
        },
        "CsvToJsonLambdaFunction": {
          "Type": "AWS::Lambda::Function",
          "Properties": {
            "Code": {
              "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
              "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/csvToJson.zip"
            },
            "Handler": "src/csvToJson.lambda_handler",
            "Runtime": "python3.9",
            "FunctionName": "gwti-mqtt-observer-development-csvToJson",
            "MemorySize": 1024,
            "Timeout": 300,
            "Environment": {
              "Variables": {
                "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                "EY_FORK_MQTT_TOPIC": "ey/observer/development"
              }
            },
            "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
          },
          "DependsOn": [
            "CsvToJsonLogGroup"
          ]
        },
        "ObserverMHandlerLambdaFunction": {
          "Type": "AWS::Lambda::Function",
          "Properties": {
            "Code": {
              "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
              "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/observerMHandler.zip"
            },
            "Handler": "src/observer_m_no_process.lambda_handler",
            "Runtime": "python3.9",
            "FunctionName": "gwti-mqtt-observer-development-observerMHandler",
            "MemorySize": 1024,
            "Timeout": 300,
            "Environment": {
              "Variables": {
                "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                "EY_FORK_MQTT_TOPIC": "ey/observer/development"
              }
            },
            "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ProcessObserverRole"
          },
          "DependsOn": [
            "ObserverMHandlerLogGroup"
          ]
        },
        "ForkEyDataToEyStreamLambdaFunction": {
          "Type": "AWS::Lambda::Function",
          "Properties": {
            "Code": {
              "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
              "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/forkEyDataToEyStream.zip"
            },
            "Handler": "src/forkEyDataToEyStream.lambda_handler",
            "Runtime": "python3.9",
            "FunctionName": "gwti-mqtt-observer-development-forkEyDataToEyStream",
            "MemorySize": 1024,
            "Timeout": 300,
            "Environment": {
              "Variables": {
                "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                "EY_FORK_MQTT_TOPIC": "ey/observer/development"
              }
            },
            "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-ForkEyObserverDataRole"
          },
          "DependsOn": [
            "ForkEyDataToEyStreamLogGroup"
          ]
        },
        "SendObserverDataLambdaFunction": {
          "Type": "AWS::Lambda::Function",
          "Properties": {
            "Code": {
              "S3Bucket": "mqtt-obs-sls-eu-west-2-development-470851704113",
              "S3Key": "serverless/gwti-mqtt-observer/development/1741119757157-2025-03-04T20:22:37.157Z/sendObserverData.zip"
            },
            "Handler": "src/sendObserverData.lambda_handler",
            "Runtime": "python3.9",
            "FunctionName": "gwti-mqtt-observer-development-sendObserverData",
            "MemorySize": 1024,
            "Timeout": 60,
            "Environment": {
              "Variables": {
                "OBSERVER_DATA_TABLE_NAME": "gwti-mqtt-observer-development-RawObserverDataTable",
                "SEND_TO_TARGET_SERVER_QUEUE": "https://sqs.eu-west-2.amazonaws.com/470851704113/gwti-mqtt-observer-development-sendToTargetServer.fifo",
                "DEVKEY_CACHE_TABLE_NAME": "gwti-mqtt-observer-development-DevKeyCache",
                "EY_FORK_MQTT_TOPIC": "ey/observer/development"
              }
            },
            "Role": "arn:aws:iam::470851704113:role/gwti-mqtt-observer-development-SendObserverDataRole"
          },
          "DependsOn": [
            "SendObserverDataLogGroup"
          ]
        },
        "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8": {
          "Type": "AWS::Lambda::Version",
          "DeletionPolicy": "Retain",
          "Properties": {
            "FunctionName": {
              "Ref": "ForkEyDataToEyStreamLambdaFunction"
            },
            "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
          }
        },
        "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE": {
          "Type": "AWS::Lambda::Version",
          "DeletionPolicy": "Retain",
          "Properties": {
            "FunctionName": {
              "Ref": "CsvToJsonLambdaFunction"
            },
            "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
          }
        },
        "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI": {
          "Type": "AWS::Lambda::Version",
          "DeletionPolicy": "Retain",
          "Properties": {
            "FunctionName": {
              "Ref": "SendObserverDataLambdaFunction"
            },
            "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
          }
        },
        "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M": {
          "Type": "AWS::Lambda::Version",
          "DeletionPolicy": "Retain",
          "Properties": {
            "FunctionName": {
              "Ref": "ObserverMHandlerLambdaFunction"
            },
            "CodeSha256": "90TYczhz84rfdV1XNgVtZFLY8i9fEl1pRkEdX4WlVzc="
          }
        },
        "CsvToJsonIotTopicRule1": {
          "Type": "AWS::IoT::TopicRule",
          "Properties": {
            "TopicRulePayload": {
              "RuleDisabled": false,
              "Sql": "SELECT * FROM 'observer/development/#'",
              "Actions": [
                {
                  "Lambda": {
                    "FunctionArn": {
                      "Fn::GetAtt": [
                        "CsvToJsonLambdaFunction",
                        "Arn"
                      ]
                    }
                  }
                }
              ]
            }
          }
        },
        "CsvToJsonLambdaPermissionIotTopicRule1": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Fn::GetAtt": [
                "CsvToJsonLambdaFunction",
                "Arn"
              ]
            },
            "Action": "lambda:InvokeFunction",
            "Principal": "iot.amazonaws.com",
            "SourceArn": {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iot:",
                  {
                    "Ref": "AWS::Region"
                  },
                  ":",
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ":rule/",
                  {
                    "Ref": "CsvToJsonIotTopicRule1"
                  }
                ]
              ]
            }
          }
        },
        "CsvToJsonIotTopicRule2": {
          "Type": "AWS::IoT::TopicRule",
          "Properties": {
            "TopicRulePayload": {
              "RuleDisabled": false,
              "Sql": "SELECT * FROM 'ey/observer/development/#'",
              "Actions": [
                {
                  "Lambda": {
                    "FunctionArn": {
                      "Fn::GetAtt": [
                        "CsvToJsonLambdaFunction",
                        "Arn"
                      ]
                    }
                  }
                }
              ]
            }
          }
        },
        "CsvToJsonLambdaPermissionIotTopicRule2": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Fn::GetAtt": [
                "CsvToJsonLambdaFunction",
                "Arn"
              ]
            },
            "Action": "lambda:InvokeFunction",
            "Principal": "iot.amazonaws.com",
            "SourceArn": {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iot:",
                  {
                    "Ref": "AWS::Region"
                  },
                  ":",
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ":rule/",
                  {
                    "Ref": "CsvToJsonIotTopicRule2"
                  }
                ]
              ]
            }
          }
        },
        "ObserverMHandlerIotTopicRule1": {
          "Type": "AWS::IoT::TopicRule",
          "Properties": {
            "TopicRulePayload": {
              "RuleDisabled": false,
              "Sql": "SELECT * FROM 'observer-m/development/#'",
              "Actions": [
                {
                  "Lambda": {
                    "FunctionArn": {
                      "Fn::GetAtt": [
                        "ObserverMHandlerLambdaFunction",
                        "Arn"
                      ]
                    }
                  }
                }
              ]
            }
          }
        },
        "ObserverMHandlerLambdaPermissionIotTopicRule1": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Fn::GetAtt": [
                "ObserverMHandlerLambdaFunction",
                "Arn"
              ]
            },
            "Action": "lambda:InvokeFunction",
            "Principal": "iot.amazonaws.com",
            "SourceArn": {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iot:",
                  {
                    "Ref": "AWS::Region"
                  },
                  ":",
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ":rule/",
                  {
                    "Ref": "ObserverMHandlerIotTopicRule1"
                  }
                ]
              ]
            }
          }
        },
        "ForkEyDataToEyStreamIotTopicRule1": {
          "Type": "AWS::IoT::TopicRule",
          "Properties": {
            "TopicRulePayload": {
              "RuleDisabled": false,
              "Sql": "SELECT * FROM 'ey/observer/development/#'",
              "Actions": [
                {
                  "Lambda": {
                    "FunctionArn": {
                      "Fn::GetAtt": [
                        "ForkEyDataToEyStreamLambdaFunction",
                        "Arn"
                      ]
                    }
                  }
                }
              ]
            }
          }
        },
        "ForkEyDataToEyStreamLambdaPermissionIotTopicRule1": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Fn::GetAtt": [
                "ForkEyDataToEyStreamLambdaFunction",
                "Arn"
              ]
            },
            "Action": "lambda:InvokeFunction",
            "Principal": "iot.amazonaws.com",
            "SourceArn": {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iot:",
                  {
                    "Ref": "AWS::Region"
                  },
                  ":",
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ":rule/",
                  {
                    "Ref": "ForkEyDataToEyStreamIotTopicRule1"
                  }
                ]
              ]
            }
          }
        },
        "SendObserverDataEventSourceMappingSQSGwtimqttobserverdevelopmentsendToTargetServerfifo": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "DependsOn": [],
          "Properties": {
            "BatchSize": 10,
            "EventSourceArn": "arn:aws:sqs:eu-west-2:470851704113:gwti-mqtt-observer-development-sendToTargetServer.fifo",
            "FunctionName": {
              "Fn::GetAtt": [
                "SendObserverDataLambdaFunction",
                "Arn"
              ]
            },
            "Enabled": true
          }
        }
      },
      "Outputs": {
        "ServerlessDeploymentBucketName": {
          "Value": "mqtt-obs-sls-eu-west-2-development-470851704113",
          "Export": {
            "Name": "sls-gwti-mqtt-observer-development-ServerlessDeploymentBucketName"
          }
        },
        "ForkEyDataToEyStreamLambdaFunctionQualifiedArn": {
          "Description": "Current Lambda function version",
          "Value": {
            "Ref": "ForkEyDataToEyStreamLambdaVersion6q6vq4pfDJoGinSaCpsEoqcpVr0nk2fnojNfD4D8b8"
          },
          "Export": {
            "Name": "sls-gwti-mqtt-observer-development-ForkEyDataToEyStreamLambdaFunctionQualifiedArn"
          }
        },
        "CsvToJsonLambdaFunctionQualifiedArn": {
          "Description": "Current Lambda function version",
          "Value": {
            "Ref": "CsvToJsonLambdaVersionxmEeaYOKDkTsHUU2Jvagtpp678qGV9WaaFTqxy8AmE"
          },
          "Export": {
            "Name": "sls-gwti-mqtt-observer-development-CsvToJsonLambdaFunctionQualifiedArn"
          }
        },
        "SendObserverDataLambdaFunctionQualifiedArn": {
          "Description": "Current Lambda function version",
          "Value": {
            "Ref": "SendObserverDataLambdaVersionny6XxlH3e3O6TpNslq0JPsOaLl6XiH51wNzGLMmcatI"
          },
          "Export": {
            "Name": "sls-gwti-mqtt-observer-development-SendObserverDataLambdaFunctionQualifiedArn"
          }
        },
        "ObserverMHandlerLambdaFunctionQualifiedArn": {
          "Description": "Current Lambda function version",
          "Value": {
            "Ref": "ObserverMHandlerLambdaVersionmLJ09Nu2XsglbHD4Ema1PT9VycnjcM6UHvYzU7GTI4M"
          },
          "Export": {
            "Name": "sls-gwti-mqtt-observer-development-ObserverMHandlerLambdaFunctionQualifiedArn"
          }
        }
      }
    }
  }
}